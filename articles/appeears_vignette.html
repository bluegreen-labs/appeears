<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AppEEARS functionality • appeears</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous">
<!-- Fonts --><link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Titillium+Web:ital,wght@0,300;0,400;0,700;1,300;1,400&amp;display=swap" rel="stylesheet">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- ropensci --><link href="../bglabs.css" rel="stylesheet">
<meta property="og:title" content="AppEEARS functionality">
<meta property="og:description" content="appeears">
<meta name="twitter:card" content="summary">
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">

    <div class="navbar-header">

      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="external-link hidden-sm hidden-xs" href="https://bluegreenlabs.org">
          <img src="https://bluegreenlabs.org/img/logo_text_small.png" id="hexlogo" alt="bluegreen labs"></a>
        <a class="external-link hidden-md hidden-lg" href="https://bluegreenlabs.org">
          <img src="https://bluegreenlabs.org/img/logo.png" id="hexlogo" alt="bluegreen labs"></a>
        <a class="navbar-brand" href="../index.html">
           <i>appeears <small>v0.9</small></i>
        </a>
      </div>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/appeears_vignette.html">AppEEARS functionality</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/bluegreen-labs/appeears/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>AppEEARS functionality</h1>
                        <h4 data-toc-skip class="author">Koen
Hufkens</h4>
            
            <h4 data-toc-skip class="date">2023-05-13</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/bluegreen-labs/appeears/blob/HEAD/vignettes/appeears_vignette.Rmd" class="external-link"><code>vignettes/appeears_vignette.Rmd</code></a></small>
      <div class="hidden name"><code>appeears_vignette.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="login-setup">Login setup<a class="anchor" aria-label="anchor" href="#login-setup"></a>
</h2>
<p>Setup your login credentials, this will store both the user name and
password, which will be needed to generate the API tokens needed in data
requests and retrieval. Don’t forget to set the system option as
<code>options(keyring_backend = "file")</code> on linux (headless)
systems.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load the package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/bluegreen-labs/appeears" class="external-link">"appeears"</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># set the keyring to be a file on</span></span>
<span><span class="co"># linux or headless systems</span></span>
<span><span class="co"># options(keyring_backend = "file")</span></span>
<span></span>
<span><span class="co"># store your credentials in a safe</span></span>
<span><span class="co"># keyring (either encrypted file or dedicated keyring)</span></span>
<span><span class="fu"><a href="../reference/rs_set_key.html">rs_set_key</a></span><span class="op">(</span></span>
<span>  user <span class="op">=</span> <span class="st">"your_earth_data_username"</span>,</span>
<span>  password <span class="op">=</span> <span class="st">"your_earth_data_password"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># request a token (valid for 48h)</span></span>
<span><span class="va">token</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rs_login.html">rs_login</a></span><span class="op">(</span><span class="va">user</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="listing-available-data">Listing available data<a class="anchor" aria-label="anchor" href="#listing-available-data"></a>
</h2>
<p>You can list all available products on the AppEEARS API using the
<code>apprs_products()</code> function. Similarly, you can list all
available layers for a given product using <code>apprs_layers()</code>.
Note that when queryign the layers for a product you will need to use
the field <code>ProductAndVersion</code> field, as some products are
listed under various versions.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># list all product information</span></span>
<span><span class="va">products</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rs_products.html">rs_products</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># print the start of all products with their versions</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">products</span><span class="op">$</span><span class="va">ProductAndVersion</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "GPW_DataQualityInd.411"    "GPW_UN_Adj_PopCount.411"  </span></span>
<span><span class="co">#&gt; [3] "GPW_UN_Adj_PopDensity.411" "GPW_Basic_Demog_Char.411" </span></span>
<span><span class="co">#&gt; [5] "MCD12Q1.006"               "MCD12Q2.006"</span></span>
<span></span>
<span><span class="co"># list all layers for a particular</span></span>
<span><span class="co"># product</span></span>
<span><span class="va">layers</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rs_layers.html">rs_layers</a></span><span class="op">(</span></span>
<span>  product <span class="op">=</span> <span class="st">"MCD12Q2.006"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">layers</span><span class="op">)</span></span>
<span><span class="co">#&gt;   AddOffset Available DataType</span></span>
<span><span class="co">#&gt; 1                TRUE    int16</span></span>
<span><span class="co">#&gt; 2                TRUE    int16</span></span>
<span><span class="co">#&gt; 3                TRUE    int16</span></span>
<span><span class="co">#&gt; 4                TRUE    int16</span></span>
<span><span class="co">#&gt; 5                TRUE    int16</span></span>
<span><span class="co">#&gt; 6                TRUE    int16</span></span>
<span><span class="co">#&gt;                                                      Description</span></span>
<span><span class="co">#&gt; 1  Date when EVI2 last crossed 15% of the segment EVI2 amplitude</span></span>
<span><span class="co">#&gt; 2                                 Segment maximum - minimum EVI2</span></span>
<span><span class="co">#&gt; 3        Sum of daily interpolated EVI2 from Greenup to Dormancy</span></span>
<span><span class="co">#&gt; 4                                     Segment minimum EVI2 value</span></span>
<span><span class="co">#&gt; 5 Date when EVI2 first crossed 15% of the segment EVI2 amplitude</span></span>
<span><span class="co">#&gt; 6 Date when EVI2 first crossed 90% of the segment EVI2 amplitude</span></span>
<span><span class="co">#&gt;                    Dimensions FillValue FillValueRaw Group  IsQA         Layer</span></span>
<span><span class="co">#&gt; 1 time, YDim, XDim, Num_Modes     32767        32767       FALSE      Dormancy</span></span>
<span><span class="co">#&gt; 2 time, YDim, XDim, Num_Modes     32767        32767       FALSE EVI_Amplitude</span></span>
<span><span class="co">#&gt; 3 time, YDim, XDim, Num_Modes     32767        32767       FALSE      EVI_Area</span></span>
<span><span class="co">#&gt; 4 time, YDim, XDim, Num_Modes     32767        32767       FALSE   EVI_Minimum</span></span>
<span><span class="co">#&gt; 5 time, YDim, XDim, Num_Modes     32767        32767       FALSE       Greenup</span></span>
<span><span class="co">#&gt; 6 time, YDim, XDim, Num_Modes     32767        32767       FALSE      Maturity</span></span>
<span><span class="co">#&gt;   OrigDataType OrigValidMax OrigValidMin</span></span>
<span><span class="co">#&gt; 1        int16        32766        11138</span></span>
<span><span class="co">#&gt; 2        int16        10000            0</span></span>
<span><span class="co">#&gt; 3        int16         3700            0</span></span>
<span><span class="co">#&gt; 4        int16        10000            0</span></span>
<span><span class="co">#&gt; 5        int16        32766        11138</span></span>
<span><span class="co">#&gt; 6        int16        32766        11138</span></span>
<span><span class="co">#&gt;                                                     QualityLayers</span></span>
<span><span class="co">#&gt; 1 ['QA_Detailed_0','QA_Detailed_1','QA_Overall_0','QA_Overall_1']</span></span>
<span><span class="co">#&gt; 2 ['QA_Detailed_0','QA_Detailed_1','QA_Overall_0','QA_Overall_1']</span></span>
<span><span class="co">#&gt; 3 ['QA_Detailed_0','QA_Detailed_1','QA_Overall_0','QA_Overall_1']</span></span>
<span><span class="co">#&gt; 4 ['QA_Detailed_0','QA_Detailed_1','QA_Overall_0','QA_Overall_1']</span></span>
<span><span class="co">#&gt; 5 ['QA_Detailed_0','QA_Detailed_1','QA_Overall_0','QA_Overall_1']</span></span>
<span><span class="co">#&gt; 6 ['QA_Detailed_0','QA_Detailed_1','QA_Overall_0','QA_Overall_1']</span></span>
<span><span class="co">#&gt;   QualityProductAndVersion ScaleFactor Units ValidMax ValidMin XSize YSize</span></span>
<span><span class="co">#&gt; 1              MCD12Q2.006           1   Day    32766    11138  2400  2400</span></span>
<span><span class="co">#&gt; 2              MCD12Q2.006       1e-04  EVI2    10000        0  2400  2400</span></span>
<span><span class="co">#&gt; 3              MCD12Q2.006         0.1  EVI2     3700        0  2400  2400</span></span>
<span><span class="co">#&gt; 4              MCD12Q2.006       1e-04  EVI2    10000        0  2400  2400</span></span>
<span><span class="co">#&gt; 5              MCD12Q2.006           1   Day    32766    11138  2400  2400</span></span>
<span><span class="co">#&gt; 6              MCD12Q2.006           1   Day    32766    11138  2400  2400</span></span>
<span><span class="co">#&gt;            Band</span></span>
<span><span class="co">#&gt; 1      Dormancy</span></span>
<span><span class="co">#&gt; 2 EVI_Amplitude</span></span>
<span><span class="co">#&gt; 3      EVI_Area</span></span>
<span><span class="co">#&gt; 4   EVI_Minimum</span></span>
<span><span class="co">#&gt; 5       Greenup</span></span>
<span><span class="co">#&gt; 6      Maturity</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="formatting-data-requests">Formatting data requests<a class="anchor" aria-label="anchor" href="#formatting-data-requests"></a>
</h2>
<p>requests for data are generated from structured data frames, listing
the following parameters. This allows for batch requests.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  task <span class="op">=</span> <span class="st">"grand canyon"</span>,</span>
<span>  subtask <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"test1"</span>, <span class="st">"test2"</span><span class="op">)</span>,</span>
<span>  latitude <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">36.206228</span>, <span class="fl">36.206228</span><span class="op">)</span>,</span>
<span>  longitude <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">112.127134</span>, <span class="op">-</span><span class="fl">112.127134</span><span class="op">)</span>,</span>
<span>  start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2018-01-01"</span>,<span class="st">"2018-01-01"</span><span class="op">)</span>,</span>
<span>  end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2018-01-15"</span>,<span class="st">"2018-01-15"</span><span class="op">)</span>,</span>
<span>  product <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"MOD11A2.061"</span>,<span class="st">"MCD12Q2.006"</span><span class="op">)</span>,</span>
<span>  layer <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"LST_Day_1km"</span>,<span class="st">"Dormancy"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The <code>apprs_build_task()</code> function converts this data frame
to a correctly structured JSON which will be used in the API call.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># convert the task to JSON and</span></span>
<span><span class="co"># execute request</span></span>
<span><span class="va">task</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rs_build_task.html">rs_build_task</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">df</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># request the task to be executed</span></span>
<span><span class="fu"><a href="../reference/rs_request.html">rs_request</a></span><span class="op">(</span></span>
<span>  request <span class="op">=</span> <span class="va">task</span>,</span>
<span>  user <span class="op">=</span> <span class="st">"earth_data_user"</span>,</span>
<span>  transfer <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start bottom-8">
            <div class="col-xs-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="http://github.com/bluegreen-labs" target="_blank" class="external-link">
                          <div class="icon fab fa-github"></div></a>
                        <a href="https://bluegreenlabs.org/labs/" target="_blank" class="external-link">
                          <div class="icon fa fa-flask"></div></a>
                        <a href="http://twitter.com/bluegreen_labs" target="_blank" class="external-link">
                          <div class="icon fab fa-twitter"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://bluegreenlabs.org/#intro" class="external-link">BlueGreen Labs</a></li>
                            <li><a href="https://bluegreenlabs.org/#people" class="external-link">Our Team</a></li>
                            <li><a href="https://bluegreenlabs.org/#contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://github.com/bluegreen-labs" class="external-link">Packages</a></li>
                            <li><a href="https://bluegreenlabs.org/publication/" class="external-link">Publications</a></li>
                            <li><a href="https://bluegreenlabs.org/post/" class="external-link">Blog</a></li>
                        </ul>
</div>

                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->

      </footer>
</div>

  


  

  </body>
</html>
